<html><head><title>Building mod_perl (make) (Practical mod_perl)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Stas Bekman and Eric Cholet" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00227-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Practical mod_perl" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">




<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_01.html"><img src="../images//txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch03_03.html"><img src="../images//txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">3.2. Building mod_perl (make)</h2>

<p>After completing<a name="pmodperl-CHP-3-ITERM-3620" /><a name="pmodperl-CHP-3-ITERM-3621" /><a name="pmodperl-CHP-3-ITERM-3622" />
the configuration, it's time to build the server by
simply calling:</p>

<blockquote><pre class="code">panic% make</pre></blockquote>

<p>The <em class="emphasis">make</em> program first compiles the source files
and creates a mod_perl library file. Then, depending on your
configuration, this library is either linked with
<em class="emphasis">httpd</em> (statically) or not linked at all,
allowing you to dynamically load it at runtime.</p>

<p>You should avoid putting the mod_perl source directory inside the
Apache source directory, as this confuses the build process. The best
choice is to put both source directories under the same parent
directory.</p>

<a name="pmodperl-CHP-3-SECT-2.1" /><div class="sect2">
<h3 class="sect2">3.2.1. What Compiler Should Be Used to Build mod_perl?</h3>

<p>All Perl
modules<a name="pmodperl-CHP-3-ITERM-3623" /> that use C extensions must be compiled
using the compiler with which your copy of Perl was built.</p>

<p>When you run <em class="emphasis">perl Makefile.PL</em>, a
<em class="emphasis">Makefile</em> is created. This
<em class="emphasis">Makefile</em> includes the same compilation options
that were used to build Perl itself. They are stored in the
<tt class="literal">Config.pm</tt> module and can be displayed with the
<em class="emphasis">Perl -V</em> command. All these options are reapplied
when compiling Perl modules.</p>

<p>If you use a different compiler to build Perl extensions, chances are
that the options this compiler uses won't be the
same, or they might be interpreted in a completely different way. So
the code may not compile, may dump core, or may behave in unexpected
ways.</p>

<p>Since Perl, Apache, and third-party modules all work together under
mod_perl, it's essential to use the same compiler
while building each of the components.</p>

<p>If you compile a non-Perl component separately, you should make sure
to use both the same compiler and the same options used to build
Perl. You can find much of this information by running <em class="emphasis">perl
-V</em>.</p>

</div>
<a name="pmodperl-CHP-3-SECT-2.2" /><div class="sect2">
<h3 class="sect2">3.2.2. make Troubleshooting</h3>

<p>The following<a name="pmodperl-CHP-3-ITERM-3624" /><a name="pmodperl-CHP-3-ITERM-3625" /> errors are the ones that frequently
occur during the <em class="emphasis">make</em> process when building
mod_perl.</p>

<a name="pmodperl-CHP-3-SECT-2.2.1" /><div class="sect3">
<h3 class="sect3">3.2.2.1. Undefined reference to `Perl_newAV'</h3>
<a name="pmodperl-CHP-3-ITERM-3626" />
<p>This and similar error messages may show up during the
<em class="emphasis">make</em> process. Generally it happens when you have
a broken Perl installation. If it's installed from a
broken <em class="emphasis">rpm</em> or another precompiled binary
package, build Perl from source or use another properly built binary
package. Run <em class="emphasis">perl -V</em> to learn what version of
Perl you are using and other important details.</p>

</div>

<a name="pmodperl-CHP-3-SECT-2.2.2" /><div class="sect3">
<h3 class="sect3">3.2.2.2. Unrecognized format specifier for...</h3>

<p>This error is <a name="pmodperl-CHP-3-ITERM-3627" />usually reported due to the problems with
some versions of the <tt class="literal">SFIO</tt> library. Try to use the
latest version to get around this problem or, if you
don't really need <tt class="literal">SFIO</tt>, rebuild
Perl without this library.</p>

</div>
</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_01.html"><img src="../images//txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img src="../images//txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch03_03.html"><img src="../images//txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">3. Installing mod_perl</td><td align="center" valign="top" width="228"><a href="index/index.html"><img src="../images//index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">3.3. Testing the Server </td></tr></table></div>
<hr width="684" align="left" />


<p><p><font size="-1"><a href="copyrght.html">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="0,0,85,92" href="../index.html"><area shape="rect" coords="89,1,204,113" href="../apache/index.html"><area shape="rect" coords="208,-1,296,136" href="../php/index.html"><area shape="rect" coords="301,-1,403,132" href="../modperl/index.html"><area shape="rect" coords="406,3,503,115" href="../mysql/index.html"><area shape="rect" coords="507,2,596,142" href="../lian/index.html"><area shape="rect" coords="600,1,690,127" href="../rlinux/index.html">
</map>

</body></html>