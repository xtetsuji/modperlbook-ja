<html><head><title>Installing mod_perl on Multiple Machines (Practical mod_perl)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Stas Bekman and Eric Cholet" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00227-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Practical mod_perl" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">




<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_07.html"><img src="../images//txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch03_09.html"><img src="../images//txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">3.8. Installing mod_perl on Multiple Machines</h2>

<p>You may
<a name="pmodperl-CHP-3-ITERM-3716" /><a name="pmodperl-CHP-3-ITERM-3717" /><a name="pmodperl-CHP-3-ITERM-3718" />want to build
<em class="emphasis">httpd</em> once and then copy it to other machines.
But the Perl side of mod_perl needs the Apache header files to
compile. To avoid dragging and build Apache on all your other
machines, there are a few <em class="emphasis">Makefile</em> targets in
mod_perl to help you out:</p>

<blockquote><pre class="code">panic% make tar_Apache</pre></blockquote>

<p>This will make a <em class="emphasis">tar</em> <a name="pmodperl-CHP-3-ITERM-3719" />file (<em class="emphasis">Apache.tar</em>)
of all the files mod_perl installs in your Perl's
<em class="emphasis">site_perl</em> directory. You can then unpack this
under the <em class="emphasis">site_perl</em><a name="pmodperl-CHP-3-ITERM-3720" /> directory on another machine:</p>

<blockquote><pre class="code">panic% make offsite-tar</pre></blockquote>

<p>This will copy all the header files from the Apache source directory
against which you configured mod_perl. It will then run
<em class="emphasis">make dist</em>, which creates a
<em class="emphasis">mod_perl-1.xx.tar.gz</em> file, ready to unpack on
another machine to compile and install the Perl side of mod_perl.</p>

<p>If you really want to make your life easy, you should use one of the
more advanced packaging systems. For example, almost all Linux
distributions use packaging tools on top of plain
<em class="emphasis">tar.gz</em>, allowing you to track prerequisites for
each package and providing for easy installation, upgrade, and
cleanup. One of the most widely used packagers is the
<a name="pmodperl-CHP-3-ITERM-3721" />Red Hat Package Manager
(RPM). See <a href="http://www.rpm.org/">http://www.rpm.org/</a>
for more information.</p>

<p>Under RPM, all <a name="pmodperl-CHP-3-ITERM-3722" />you have to
do is prepare a source distribution package (SRPM) and then build a
binary release. The binary can be installed on any number of machines
in a matter of seconds.</p>

<p>RPM will even work on live production machines. Suppose you have two
identical machines (with identical software and hardware, although,
depending on your setup, identical hardware may be less critical).
Let's say that one is a live server and the other is
for development. You build an RPM with a mod_perl binary
distribution, install it on the development machine, and make sure
that it is working and stable. You can then install the RPM package
on the live server without any fear. Make sure that
<em class="emphasis">httpd.conf</em> is correct, since it generally
specifies parameters that are unique to the live machine (for
example, the hostname).</p>

<p>When you have installed the package, just restart the server.
It's a good idea to keep a package of the previous
system, in case something goes wrong. You can then easily remove the
installed package and put the old one back in case of problems.</p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch03_07.html"><img src="../images//txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img src="../images//txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch03_09.html"><img src="../images//txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">3.7. Installing mod_perl with the CPAN.pm Interactive Shell</td><td align="center" valign="top" width="228"><a href="index/index.html"><img src="../images//index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">3.9. Installation into a Nonstandard Directory</td></tr></table></div>
<hr width="684" align="left" />


<p><p><font size="-1"><a href="copyrght.html">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="0,0,85,92" href="../index.html"><area shape="rect" coords="89,1,204,113" href="../apache/index.html"><area shape="rect" coords="208,-1,296,136" href="../php/index.html"><area shape="rect" coords="301,-1,403,132" href="../modperl/index.html"><area shape="rect" coords="406,3,503,115" href="../mysql/index.html"><area shape="rect" coords="507,2,596,142" href="../lian/index.html"><area shape="rect" coords="600,1,690,127" href="../rlinux/index.html">
</map>

</body></html>