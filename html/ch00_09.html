<html><head><title>Installing Perl Modules (Practical mod_perl)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Stas Bekman and Eric Cholet" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0-596-00227-0" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Practical mod_perl" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">




<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch00_08.html"><img src="../images//txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="ch00_10.html"><img src="../images//txtnexta.gif" alt="Next" border="0" /></a></td></tr></table></div>



<h2 class="sect1">0.9. Installing Perl Modules</h2>

<p>mod_perl and all the various Perl modules and helper utilities
mentioned in this book are available via FTP and HTTP from any of the
sites on the Comprehensive Perl Archive Network (CPAN) at <a href="http://cpan.org/">http://cpan.org/</a>. This is a list of several
hundred public FTP and HTTP sites that mirror each
others' contents on a regular basis.</p>

<p>You can search for and install Perl modules in two ways:</p>

<ul><li>
<p>Manually, by going to <a href="http://search.cpan.org/">http://search.cpan.org/</a>, finding the module,
then downloading, building, and installing it. You can also browse
the modules by categories or authors at <a href="http://cpan.org/">http://cpan.org/</a>.</p>
</li><li>
<p>Automatically, by using Andreas Koenig's CPAN shell
or (on MS Windows systems) the Perl Package Manager (PPM). These
tools allow you to search for available modules and install them with
a single command.</p>
</li></ul>
<a name="pmodperl-PREFACE-2-SECT-9.1" /><div class="sect2">
<h3 class="sect2">9.1. Manual Installation</h3>

<p>When you download a module manually, it's best to
find the one closest to you. You can find a list of CPAN mirrors at
<a href="http://mirror.cpan.org/">http://mirror.cpan.org/</a>.</p>

<p>You can download the source packages with your browser, or, if you
know the URL of the package, you can use any command tool to do that
for you. In this book, we usually use the
<em class="filename">lwp-download</em> perl script (which is bundled with
the <tt class="literal">libwww-perl</tt> package, by Gisle Aas) as a
client. You can use any other utility to download the files from the
Internet.</p>

<p>Once you've downloaded the Perl module you want,
you'll need to build and install it. Some modules
are 100% Perl and can just be copied to the Perl library directory.
Others contain some components written in C and need to be compiled.</p>

<p>Let's download the CPAN shell package, which we will
use shortly:</p>

<blockquote><pre class="code">panic% lwp-download http://www.cpan.org/authors/id/ANDK/CPAN-1.60.tar.gz
Saving to 'CPAN-1.60.tar.gz'...
115 KB received in 2 seconds (56.3 KB/sec)</pre></blockquote>

</div>
<a name="pmodperl-PREFACE-2-SECT-9.2" /><div class="sect2">
<h3 class="sect2">9.2. Prerequisites Needed to Install Perl Modules on Windows</h3>

<p>While Unix operating systems include standard utilities such as
<em class="filename">tar</em>, <em class="filename">gzip</em>, and
<em class="filename">make</em>, Windows systems don't.
For this reason, you will have to go through some extra steps to
ensure that you can install modules from the CPAN under Windows.</p>

<p>We assume here that you are using the ActivePerl distribution from
ActiveState.</p>

<p>The first utility needed is <em class="filename">make</em>. On Windows,
such a utility (called <em class="filename">nmake</em>) is distributed by
Microsoft for free. You can download a self-extracting archive from
<a href="ftp://ftp.microsoft.com/Softlib/MSLFILES/nmake15.exe">ftp://ftp.microsoft.com/Softlib/MSLFILES/nmake15.exe</a>.
When you run this executable, you will have three files:
<em class="filename">readme.txt</em>, <em class="filename">nmake.err</em>, and
<em class="filename">nmake.exe</em>. Copy these files into a directory in
your <tt class="literal">PATH</tt>,<a href="#FOOTNOTE-1">[1]</a> such as
<em class="filename">C:\Windows\System</em>,
<em class="filename">C:\Windows</em>, or even
<em class="filename">C:\Perl\bin</em>. You will now be able to replace any
use of <em class="filename">make</em> in the examples in this book with
<em class="filename">nmake</em>.</p> <blockquote><a name="FOOTNOTE-1" /><p> [1]To see your
<tt class="literal">PATH</tt>, run <tt class="literal">echo %PATH%</tt> from the
command line.</p> </blockquote>

<p>Some examples, and the use of <tt class="literal">CPAN.pm</tt>, also
require command-line utilities such as <em class="emphasis">tar</em> or
<em class="emphasis">gzip</em>. There are a number of projects that have
ported such tools to Windows&#8212;for example, GnuWin32 (<a href="http://gnuwin32.sourceforge.net/">http://gnuwin32.sourceforge.net/</a>) and
UnixUtils (<a href="http://unxutils.sourceforge.net/">http://unxutils.sourceforge.net/</a>). These
toolkits allow you to use standard Unix utilities from your Windows
command line.</p>

<p>Another option is Cygwin (<a href="http://www.cygwin.com/">http://www.cygwin.com/</a>), which puts a Unix
layer on top of Windows. This allows you to use many Unix-specific
applications, but these must run from the Cygwin shell. If you use
Cygwin, you should use the normal Unix steps discussed in this book,
not any Windows-specific ones.</p>

<p>There is another downside of Windows: compilation tools
aren't included. This means that some modules that
use C extensions (e.g., mod_perl) can't be installed
in the normal way, and you have to get precompiled distributions of
them. In such cases, it is a good idea to follow the PPM instructions
given later in this Preface, which should allow you to install binary
versions of some of the modules discussed here.</p>

</div>
<a name="pmodperl-PREFACE-2-SECT-9.3" /><div class="sect2">
<h3 class="sect2">9.3. Building a Perl Module</h3>

<p>Building a Perl module and installing it is simple and usually
painless. Perl modules are distributed as
<em class="emphasis">gzip</em>ped <em class="emphasis">tar</em> archives. You
can unpack them like this:</p>

<blockquote><pre class="code">panic% gunzip -c CPAN-1.60.tar.gz  | tar xvf -
 CPAN-1.60/
 CPAN-1.60/lib/
 CPAN-1.60/lib/CPAN/
 CPAN-1.60/lib/CPAN/Nox.pm
 CPAN-1.60/lib/CPAN/Admin.pm
 CPAN-1.60/lib/CPAN/FirstTime.pm
 CPAN-1.60/lib/Bundle/
 CPAN-1.60/lib/Bundle/CPAN.pm
 CPAN-1.60/lib/CPAN.pm
 CPAN-1.60/Todo
 CPAN-1.60/ChangeLog
 CPAN-1.60/t/
 CPAN-1.60/t/loadme.t
 CPAN-1.60/t/vcmp.t
 CPAN-1.60/MANIFEST
 CPAN-1.60/Makefile.PL
 CPAN-1.60/cpan
 CPAN-1.60/README</pre></blockquote>

<p>Or, if you are using a GNU <em class="filename">tar</em> utility, you can
unpack the package in one command:</p>

<blockquote><pre class="code">panic% tar zxvf CPAN-1.59.tzr.gz</pre></blockquote>

<p>Once the archive has been unpacked, you'll have to
enter the newly created directory and issue the <em class="filename">perl
Makefile.PL</em>, <em class="filename">make</em>, <em class="filename">make
test</em>, and <em class="filename">make install</em> commands.
Together, these will build, test, and install the module:</p>

<blockquote><pre class="code">panic% cd CPAN-1.60
panic% perl Makefile.PL
Checking if your kit is complete...
Looks good
Writing Makefile for CPAN

panic% make 
cp lib/CPAN/Nox.pm blib/lib/CPAN/Nox.pm
cp lib/Bundle/CPAN.pm blib/lib/Bundle/CPAN.pm
cp lib/CPAN/Admin.pm blib/lib/CPAN/Admin.pm
cp lib/CPAN.pm blib/lib/CPAN.pm
cp lib/CPAN/FirstTime.pm blib/lib/CPAN/FirstTime.pm
cp cpan blib/script/cpan
/usr/bin/perl -I/usr/lib/perl5/5.6.1/i386-linux 
              -I/usr/lib/perl5/5.6.1 -MExtUtils::MakeMaker
              -e "MY-&gt;fixin(shift)" blib/script/cpan
Manifying blib/man3/CPAN::Nox.3
Manifying blib/man3/Bundle::CPAN.3
Manifying blib/man3/CPAN::Admin.3
Manifying blib/man3/CPAN.3
Manifying blib/man3/CPAN::FirstTime.3

panic% make test
PERL_DL_NONLAZY=1 /usr/bin/perl -Iblib/arch -Iblib/lib 
-I/usr/lib/perl5/5.6.1/i386-linux -I/usr/lib/perl5/5.6.1 
-e 'use Test::Harness qw(&amp;runtests $verbose);
   $verbose=0; runtests @ARGV;' 
t/*.t
t/loadme............ok
t/vcmp..............ok
All tests successful.
Files=2, Tests=31,  3 wallclock secs ( 1.22 cusr +  0.91 csys =  2.13 CPU)</pre></blockquote>

<p>Become <em class="emphasis">root</em> if you need to install the module on
the whole system:</p>

<blockquote><pre class="code">panic% su
&lt;root password&gt;

panic# make install
Installing /usr/lib/perl5/man/man3/CPAN::Nox.3
Installing /usr/lib/perl5/man/man3/Bundle::CPAN.3
Installing /usr/lib/perl5/man/man3/CPAN::Admin.3
Installing /usr/lib/perl5/man/man3/CPAN.3
Installing /usr/lib/perl5/man/man3/CPAN::FirstTime.3
Writing /usr/lib/perl5/5.6.1/i386-linux/auto/CPAN/.packlist
Appending installation info to /usr/lib/perl5/5.6.1/i386-linux/perllocal.pod</pre></blockquote>

</div>
<a name="pmodperl-PREFACE-2-SECT-9.4" /><div class="sect2">
<h3 class="sect2">9.4. Using the CPAN Shell</h3>

<p>A simpler way to do the same thing is to use Andreas
Koenig's wonderful CPAN shell (recent Perl versions
come bundled with this module). With it, you can download, build, and
install Perl modules from a simple command-line shell. The following
illustrates a typical session in which we install the
<tt class="literal">Apache::VMonitor</tt> module:</p>

<blockquote><pre class="code">panic% perl -MCPAN -e shell

cpan shell -- CPAN exploration and modules installation (v1.60)
ReadLine support enabled

cpan&gt; install Apache::VMonitor
Running install for module Apache::VMonitor
Running make for S/ST/STAS/Apache-VMonitor-0.6.tar.gz
Fetching with LWP:
  http://cpan.org/authors/id/S/ST/STAS/Apache-VMonitor-0.6.tar.gz
Fetching with LWP:
  http://cpan.org/authors/id/S/ST/STAS/CHECKSUMS
Checksum for /root/.cpan/sources/authors/id/S/ST/STAS/Apache-VMonitor-0.6.tar.gz ok
Apache-VMonitor-0.6/
Apache-VMonitor-0.6/README
Apache-VMonitor-0.6/Makefile.PL
Apache-VMonitor-0.6/MANIFEST
Apache-VMonitor-0.6/CHANGES
Apache-VMonitor-0.6/VMonitor.pm

CPAN.pm: Going to build S/ST/STAS/Apache-VMonitor-0.6.tar.gz

Checking for Apache::Scoreboard...ok
Checking for GTop...ok
Checking for Time::HiRes...ok
Checking for mod_perl...ok
Checking if your kit is complete...
Looks good
Writing Makefile for Apache::VMonitor
cp VMonitor.pm blib/lib/Apache/VMonitor.pm
Manifying blib/man3/Apache::VMonitor.3
  /usr/bin/make  -- OK
Running make test
No tests defined for Apache::VMonitor extension.
  /usr/bin/make test -- OK
Running make install
Installing /usr/lib/perl5/site_perl/5.6.1/Apache/VMonitor.pm
Installing /usr/lib/perl5/man/man3/Apache::VMonitor.3
Writing /usr/lib/perl5/site_perl/5.6.1/i386-linux/auto/Apache/VMonitor/.packlist
Appending installation info to /usr/lib/perl5/5.6.1/i386-linux/perllocal.pod
  /usr/bin/make install UNINST=1 -- OK

cpan&gt; exit</pre></blockquote>

<p>Notice that the CPAN shell fetches the <em class="emphasis">CHECKSUMS</em>
file and verifies that the package hasn't been
tampered with.</p>

<p>The latest CPAN module comes with a small utility called
<em class="filename">cpan</em>, which you can use to start the CPAN shell:</p>

<blockquote><pre class="code">panic% cpan

cpan shell -- CPAN exploration and modules installation (v1.60)
ReadLine support enabled</pre></blockquote>

</div>
<a name="pmodperl-PREFACE-2-SECT-9.5" /><div class="sect2">
<h3 class="sect2">9.5. Using the Perl Package Manager</h3>

<p>If you are using ActivePerl on Windows, or the Perl/Apache/mod_perl
binary distribution discussed in <a href="ch02_01.html">Chapter 2</a>, you
will have access to a handy utility called <em class="filename">ppm</em>.
This program installs Perl modules from archives separate from the
CPAN that contain precompiled versions of certain modules.</p>

<p>For first-time configuration, do the following:</p>

<blockquote><pre class="code">C:\&gt; ppm
PPM interactive shell (2.1.5) - type 'help' for available commands.
PPM&gt; set repository theoryx5 http://theoryx5.uwinnipeg.ca/cgi-bin/ppmserver?urn:/PPMServer
PPM&gt; set repository oi http://openinteract.sourceforge.net/ppmpackages/
PPM&gt; set save
PPM&gt; quit
C:\&gt;</pre></blockquote>

<p>These steps will allow you to access a number of interesting packages
not available from the ActiveState archive (including mod_perl). To
see a list of these packages, type <tt class="literal">search</tt> in the
PPM interactive shell, or visit <a href="http://openinteract.sourceforge.net/ppmpackages/">http://openinteract.sourceforge.net/ppmpackages/</a>
and <a href="http://theoryx5.uwinnipeg.ca/ppmpackages/">http://theoryx5.uwinnipeg.ca/ppmpackages/</a>.</p>

<p>Now, when you want to install a module, issue the following commands:</p>

<blockquote><pre class="code">C:\&gt; ppm
PPM&gt; install Some::Module
PPM&gt; quit
C:\&gt;</pre></blockquote>

<p>It's as easy as that! Alternatively, you might want
to do it directly:</p>

<blockquote><pre class="code">C:\&gt; ppm install Some::Module</pre></blockquote>

<p>This will have the same effect.</p>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch00_08.html"><img src="../images//txtpreva.gif" alt="Previous" border="0" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img src="../images//txthome.gif" alt="Home" border="0" /></a></td><td align="right" valign="top" width="228"><a href="ch00_10.html"><img src="../images//txtnexta.gif" alt="Next" border="0" /></a></td></tr><tr><td align="left" valign="top" width="228">0.8. Command Interpreter Program (Shell) Conventions</td><td align="center" valign="top" width="228"><a href="index/index.html"><img src="../images//index.gif" alt="Book Index" border="0" /></a></td><td align="right" valign="top" width="228">0.10. How to Contact Us</td></tr></table></div>
<hr width="684" align="left" />


<p><p><font size="-1"><a href="copyrght.html">Copyright &copy; 2003</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map">
<area shape="rect" coords="0,0,85,92" href="../index.html"><area shape="rect" coords="89,1,204,113" href="../apache/index.html"><area shape="rect" coords="208,-1,296,136" href="../php/index.html"><area shape="rect" coords="301,-1,403,132" href="../modperl/index.html"><area shape="rect" coords="406,3,503,115" href="../mysql/index.html"><area shape="rect" coords="507,2,596,142" href="../lian/index.html"><area shape="rect" coords="600,1,690,127" href="../rlinux/index.html">
</map>

</body></html>
